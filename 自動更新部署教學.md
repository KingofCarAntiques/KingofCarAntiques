# 🚀 秒估車 - 自動價格更新系統部署教學

## 📋 系統功能

✅ **完全免費** - 使用 GitHub Actions，無需購買主機
✅ **自動更新** - 每月1日自動執行，無需手動操作
✅ **權威數據** - 爬取 8891、行將拍賣等數據來源
✅ **永久運作** - GitHub Pages 免費託管，24/7 運作

---

## 🎯 部署步驟（總共 5 步驟）

### 步驟 1️⃣：註冊 GitHub 帳號

1. 前往 [GitHub](https://github.com/)
2. 點擊右上角 **Sign up** 註冊
3. 填寫 Email、密碼、用戶名
4. 完成 Email 驗證

---

### 步驟 2️⃣：建立 GitHub Repository（儲存庫）

1. 登入 GitHub 後，點擊右上角 **+** → **New repository**

2. 填寫資訊：
   - **Repository name**: `miaoguche`（或您想要的名稱）
   - **Description**: 秒估車 - 快速汽車估價系統
   - 選擇 **Public**（公開）
   - 勾選 **Add a README file**

3. 點擊 **Create repository**

---

### 步驟 3️⃣：上傳網站檔案

#### 方法 A：使用網頁上傳（簡單）

1. 進入您的 Repository
2. 點擊 **Add file** → **Upload files**
3. 拖曳以下檔案到上傳區：

```
📁 您需要上傳的檔案：
├── car-valuation.html
├── style.css
├── car-data.js
├── script.js
├── chat.js
├── .github/
│   └── workflows/
│       └── update-prices.yml
└── scripts/
    ├── package.json
    ├── scraper.js
    └── update-car-data.js
```

4. 點擊 **Commit changes** 完成上傳

#### 方法 B：使用 Git 指令（進階）

```bash
# 1. 在您的電腦上打開終端機
cd C:\Users\User

# 2. 初始化 Git
git init

# 3. 加入所有檔案
git add .

# 4. 建立提交
git commit -m "初始提交 - 秒估車網站"

# 5. 連結到 GitHub
git remote add origin https://github.com/您的帳號/miaoguche.git

# 6. 推送到 GitHub
git push -u origin main
```

---

### 步驟 4️⃣：啟用 GitHub Pages

1. 在您的 Repository 頁面，點擊 **Settings**（設定）

2. 左側選單找到 **Pages**

3. 在 **Source** 區域：
   - Branch 選擇：**main**
   - 資料夾選擇：**/ (root)**

4. 點擊 **Save**

5. 等待 1-2 分鐘，您會看到：
   ```
   ✅ Your site is published at https://您的帳號.github.io/miaoguche/
   ```

6. **設定首頁檔名**：
   - 將 `car-valuation.html` 改名為 `index.html`
   - 或在 Repository 新增 `index.html` 指向 `car-valuation.html`

---

### 步驟 5️⃣：啟用 GitHub Actions（自動更新）

1. 在 Repository 頁面，點擊 **Actions** 標籤

2. 如果看到提示：
   **"Workflows aren't being run on this repository"**
   點擊 **I understand my workflows, go ahead and enable them**

3. 您會看到工作流程：**每月自動更新車輛價格**

4. **手動測試執行**（可選）：
   - 點擊工作流程名稱
   - 點擊右側 **Run workflow** → **Run workflow**
   - 等待執行完成（約 2-5 分鐘）

5. 檢查執行結果：
   - 綠色勾勾 ✅ = 成功
   - 紅色叉叉 ❌ = 失敗（查看 log 排除問題）

---

## 🎉 完成！系統已部署

您的網站現在已經：

✅ **線上運作**: `https://您的帳號.github.io/miaoguche/`
✅ **自動更新**: 每月1日自動爬取並更新價格
✅ **完全免費**: 無需任何費用
✅ **永久有效**: 只要 GitHub 帳號存在即可

---

## 🔧 進階設定

### 1. 綁定自訂網域 `www.秒估車.com.tw`

如果您已購買網域：

1. 在 **Settings** → **Pages** → **Custom domain**
2. 輸入：`www.秒估車.com.tw`
3. 勾選 **Enforce HTTPS**
4. 在網域商設定 DNS：
   ```
   類型: CNAME
   名稱: www
   值: 您的帳號.github.io
   ```

### 2. 修改自動更新時間

編輯 `.github/workflows/update-prices.yml`:

```yaml
schedule:
  # 每月1日凌晨2點（台灣時間）
  - cron: '0 18 1 * *'

  # 改成每週一：
  - cron: '0 18 * * 1'

  # 改成每天：
  - cron: '0 18 * * *'
```

### 3. 完善爬蟲功能

目前 `scripts/scraper.js` 是基礎架構，您需要：

1. 研究 8891 和行將拍賣的網頁結構
2. 使用 Puppeteer 處理動態載入
3. 加入反爬蟲對策（延遲、User-Agent 輪替）
4. 實作完整的價格解析邏輯

**參考資源：**
- [Puppeteer 官方文件](https://pptr.dev/)
- [Cheerio 教學](https://cheerio.js.org/)

---

## 📊 監控與維護

### 查看自動更新狀態

1. 進入 **Actions** 標籤
2. 查看最近的執行記錄
3. 點擊查看詳細 log

### 價格備份

每次更新前會自動備份至：
```
scripts/backups/car-data_2025-12.js
```

### 手動更新

如果需要立即更新，不等每月1日：

1. 進入 **Actions**
2. 選擇 **每月自動更新車輛價格**
3. 點擊 **Run workflow**

---

## ⚠️ 常見問題

### Q1: Actions 執行失敗？

**原因：** 可能是爬蟲被網站封鎖

**解決：**
1. 檢查 log 找出錯誤
2. 增加延遲時間
3. 改用 Puppeteer headless browser

### Q2: 價格沒有更新？

**原因：** 爬蟲可能沒有成功抓取數據

**解決：**
1. 查看 `scripts/price-data.json` 是否有數據
2. 檢查爬蟲邏輯是否正確
3. 手動執行測試

### Q3: 網站無法訪問？

**原因：** GitHub Pages 尚未部署完成

**解決：**
1. 等待 1-2 分鐘
2. 檢查 Settings → Pages 是否啟用
3. 確認 `index.html` 存在

---

## 📞 需要協助？

如果遇到問題：

1. **查看 Actions log** - 大部分問題都能從 log 找到原因
2. **GitHub Discussions** - 在 Repository 開啟討論
3. **Issues** - 回報 bug 或功能請求

---

## 🔄 更新流程說明

系統運作流程：

```
每月1日凌晨2點
    ↓
GitHub Actions 自動觸發
    ↓
執行 scraper.js 爬取價格
    ↓
儲存至 price-data.json
    ↓
執行 update-car-data.js 更新資料庫
    ↓
自動 commit 並 push
    ↓
GitHub Pages 自動部署新版本
    ↓
✅ 網站顯示最新價格
```

---

## 🎯 您現在可以：

✅ 完全不用管價格更新，系統自動處理
✅ 隨時訪問網站，永久免費運作
✅ 專注於業務，不用擔心技術維護

**恭喜！您已成功建立自動化車價估價系統！** 🎊
