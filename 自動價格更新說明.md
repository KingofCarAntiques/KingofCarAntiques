# 🔄 秒估車 - 自動價格更新系統

## 📋 系統概述

本系統每月自動更新車輛價格，採用**市場規則估算法**，無需網路爬蟲。

---

## ⚙️ 運作方式

### **1. 自動執行時間**
- 📅 每月 1 日凌晨 2:00（台灣時間）
- 🔄 GitHub Actions 自動觸發
- ⏱️ 執行時間：約 2-5 分鐘

### **2. 價格更新邏輯**

#### **市場規則估算法**（目前使用）

根據市場趨勢調整價格：

**品牌趨勢：**
- 🔋 **電動車**：Tesla -5%、BYD +2%
- 🇯🇵 **日系品牌**：Toyota/Honda 持平
- 🌟 **豪華品牌**：Benz/BMW +3%、Lexus +2%
- 🏎️ **超跑品牌**：Ferrari/Lamborghini +8%
- 🚗 **一般品牌**：預設 -2%

**車款調整：**
- 熱門車款：Altis/CR-V/RAV4 +2-3%
- Model 3/Model Y：-5%（市場降價影響）
- 冷門車款：Wish/Focus -4-5%

### **3. 更新流程**

```
每月1日 02:00
    ↓
GitHub Actions 啟動
    ↓
執行 scraper-improved.js
（載入車款資料 → 應用市場規則 → 計算新價格）
    ↓
產生 price-data.json
（更新報告）
    ↓
執行 update-car-data-improved.js
（備份原檔案 → 更新 car-data.js）
    ↓
自動提交到 GitHub
    ↓
網站自動部署
    ↓
✅ 完成！
```

---

## 📊 更新統計

每次更新會產生報告包含：
- 總品牌數
- 總車款數
- 已更新車款數
- 每款車的調整率
- 更新時間

報告位置：`scripts/price-data.json`

---

## 🛠️ 手動觸發更新

### **方法 1：GitHub 網頁**
1. 前往 https://github.com/您的帳號/KingofCarAntiques/actions
2. 選擇「每月自動更新車輛價格」
3. 點擊「Run workflow」
4. 點擊綠色「Run workflow」按鈕

### **方法 2：本機測試**
```bash
cd scripts
node scraper-improved.js
node update-car-data-improved.js
```

---

## 📁 檔案結構

```
scripts/
├── scraper-improved.js          # 價格更新程式（市場規則）
├── update-car-data-improved.js  # 資料庫更新程式
├── price-data.json              # 更新報告
├── scraper.log                  # 執行日誌
├── backups/                     # 自動備份
│   └── car-data_2025-12-30.js
└── package.json                 # 依賴套件

.github/workflows/
└── update-prices.yml            # GitHub Actions 配置
```

---

## 🔧 自訂調整

### **修改品牌趨勢**

編輯 `scraper-improved.js` 第 45-72 行：

```javascript
const marketTrends = {
    'Tesla特斯拉': 0.95,    // 改成 0.90 = -10%
    'Toyota豐田': 1.00,     // 改成 1.02 = +2%
    // ...
};
```

### **修改車款調整**

編輯 `scraper-improved.js` 第 75-85 行：

```javascript
const modelAdjustments = {
    'Altis': 1.02,          // 改成 1.05 = +5%
    // 新增您的車款...
};
```

---

## 📝 備份機制

- ✅ 每次更新前自動備份 `car-data.js`
- 📁 備份位置：`scripts/backups/`
- 📅 檔名格式：`car-data_YYYY-MM-DD.js`

### **還原備份**

```bash
cp scripts/backups/car-data_2025-12-30.js car-data.js
```

---

## ⚠️ 注意事項

### **為什麼用市場規則而非爬蟲？**

1. **穩定可靠**：不受網站改版影響
2. **合法合規**：不涉及網站爬蟲
3. **可維護性**：規則清晰易調整
4. **執行快速**：2-5 分鐘完成

### **市場規則的準確性**

- ✅ 基於 2025 年市場趨勢
- ✅ 定期檢視調整
- ✅ 適合中古車估價
- ⚠️ 建議每季手動檢查

---

## 🎯 未來計劃

如需更精準的價格：

1. **手動調整**：定期檢視熱門車款
2. **數據整合**：結合多個資料來源
3. **AI 預測**：使用機器學習（進階）

---

## 📞 需要協助？

- 📧 Email: 您的聯絡方式
- 💬 LINE: @288dyysc
- 📖 詳細文件：查看本資料夾其他 `.md` 檔案

---

**✅ 系統已完成設定，無需額外操作！**

每月自動更新，讓您專注於業務經營。🚗💨
